<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.3.4/jasmine.min.css">
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.3.4/jasmine.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.3.4/jasmine-html.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jasmine/2.3.4/boot.min.js"></script>

		<!-- included algorithms files for testing -->
		<script type="text/javascript" src="binary-search.js"></script>
		<script type="text/javascript" src="digit-sum5.js"></script>
		<script type="text/javascript" src="factorial.js"></script>
		<script type="text/javascript" src="find-loop-in-linked-list.js"></script>
		<script type="text/javascript" src="find-missing-number-in-array.js"></script>

		<script type="text/javascript">
			function adder (a, b) {
				return a+b;
			}
		</script>
		<script type="text/javascript">
			describe('the adder function',function ( ) {
				it('should add 2 numbers',function ( ) {
					expect(adder(2,3)).toBe(5);
				});
			});

			describe('Binary Search Algorithm', function(){
				it('finds key with recursive version', function(){
					//remember set must be sorted
					 var list = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
					expect(recursiveBinarySearch(list, 2, 0, list.length - 1)).toBe(2);
					
					list = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 14, 16, 20];
					expect(recursiveBinarySearch(list, 14, 0, list.length - 1)).toBe(14);

					list = [1, 2, 3, 4, 5];
					expect(recursiveBinarySearch(list, 1, 0, list.length - 1)).toBe(1);

					//expect(recursiveBinarySearch(list, 13, 0, list.length - 1)).toBeUndefined();
					expect(recursiveBinarySearch(list, 13, 0, list.length - 1)).toBe(-1);
				});
				it('returns -1 when looking for non-existent key with recursive version', function(){
					var list = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
					//expect(recursiveBinarySearch(list, 13, 0, list.length - 1)).toBeUndefined();
					expect(recursiveBinarySearch(list, 13, 0, list.length - 1)).toBe(-1);
					
					list = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 14, 16, 20];
					expect(recursiveBinarySearch(list, -2, 0, list.length - 1)).toBe(-1);

					list = [1, 2, 3, 4, 5];
					expect(recursiveBinarySearch(list, 6, 0, list.length - 1)).toBe(-1);					
				});
				it('finds key with iterative version', function(){
					//remember set must be sorted
					var list = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
					expect(iterativeBinarySearch(list, 2, 0, list.length - 1)).toBe(2);
					
					list = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 14, 16, 20];
					expect(iterativeBinarySearch(list, 14, 0, list.length - 1)).toBe(14);

					list = [1, 2, 3, 4, 5];
					expect(iterativeBinarySearch(list, 1, 0, list.length - 1)).toBe(1);
				});
				it('returns -1 when looking for non-existent key with iterative version', function(){
					var list = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
					//expect(iterativeBinarySearch(list, 13, 0, list.length - 1)).toBeUndefined();
					expect(iterativeBinarySearch(list, 13, 0, list.length - 1)).toBe(-1);
					
					list = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 14, 16, 20];
					expect(iterativeBinarySearch(list, -2, 0, list.length - 1)).toBe(-1);

					list = [1, 2, 3, 4, 5];
					expect(iterativeBinarySearch(list, 6, 0, list.length - 1)).toBe(-1);
					//even -1 is truthy					
					expect(iterativeBinarySearch(list, 6, 0, list.length - 1)).toBeTruthy();
				});				
			});

			describe('Numbers in a range whose digits sum 5', function(){
				it('returns a subset of the list', function(){
					var result = numbersWhosDigitsSum5(1, 28);
					expect(result).toContain(5);
					expect(result).toContain(14);	
					expect(result).toContain(23);

					result = numbersWhosDigitsSum5(1, 200);
					expect(result).toContain(5);
					expect(result).toContain(14);	
					expect(result).toContain(23);
					expect(result).toContain(32);					
					expect(result).toContain(41);
					expect(result).toContain(50);
					expect(result).toContain(104);
					expect(result).toContain(113);
					expect(result).toContain(122);
					expect(result).toContain(131);
					expect(result).toContain(140);
				});
				it('returns empty array', function(){
					var result = numbersWhosDigitsSum5(6-13);
					expect(result.length).toBe(0);
					expect(result.length).toBeFalsy();
					expect(result[0]).toBeUndefined();
					expect(result[0]).not.toBeDefined();

					result = numbersWhosDigitsSum5(10-3);
					expect(result.length).toBe(0);
				});				
			});

			describe('Factorial', function(){
				it('computes factorial in a recursive way', function(){
					expect(recursiveFactorial(5)).toEqual(120);
					expect(recursiveFactorial(5)).toBe(120);
					expect(recursiveFactorial(4)).toBe(24);
					expect(recursiveFactorial(6)).toBe(720);
				});
				it('Factorial of 1 is 1. 1! = 1', function(){
					expect(recursiveFactorial(1)).toBe(1);
					expect(recursiveFactorial(1)).toEqual(1);
				});
				it('Factorial of 0 is 1. 0! = 1', function(){
					expect(recursiveFactorial(0)).toBe(1);
					expect(recursiveFactorial(0)).toEqual(1);
				});				
				it('throws error when input is a negative number', function(){
					var testFn = function(){
						recursiveFactorial(-1);
					}
					expect(testFn).toBeDefined();				
					expect(testFn).toThrow(new Error("input is a negative number"));
				});
				it('computes factorial in a iterative way', function(){
					expect(iterativeFactorial(5)).toEqual(120);
					expect(iterativeFactorial(5)).toBe(120);
					expect(iterativeFactorial(4)).toBe(24);
					expect(iterativeFactorial(6)).toBe(720);
				});	
				it('Factorial of 1 is 1. 1! = 1', function(){
					expect(iterativeFactorial(1)).toBe(1);
					expect(iterativeFactorial(1)).toEqual(1);
				});
				it('Factorial of 0 is 1. 0! = 1', function(){
					expect(iterativeFactorial(0)).toBe(1);
					expect(iterativeFactorial(0)).toEqual(1);
				});				
				it('throws error when input is a negative number', function(){
					var testFn = function(){
						iterativeFactorial(-1);
					}
					expect(testFn).toBeDefined();				
					expect(testFn).toThrow(new Error("input is a negative number"));
				});				
			});

			describe('Find loop in linked list', function(){
				it('finds loop in list with loop', function(){
					var count = 0,
						head = {
							value : count++,
							next : {}
						};

					head.next = {
						value : count++,
						next : {
							value : count++,
							next : {
								value : count++,
								next : {
									value : count++,
									next : {
										value : count++,
										next : head
									}
								}
							} 	
						}
					}

					expect(head).toBeDefined();
					expect(head.value).toEqual(0);
					expect(head.next).toBeDefined();
					expect(head.next.next).not.toBe(head);
					expect(head.next.next.next.next.next.next).toBe(head);
					expect(head.next.next.next.next.next.value).toBe(5);

					expect(findLoop(head)).toBe(true);
					expect(findLoop(head)).toBeTruthy();
				});
				it('finds no loop in list with no loop', function(){
					var count = 0,
						head = {
							value : count++,
							next : {}
						};

					head.next = {
						value : count++,
						next : {
							value : count++,
							next : {
								value : count++,
								next : {
									value : count++,
									next : {
										value : count++,
										next : null
									}
								}
							} 	
						}
					}

					expect(head).toBeDefined();
					expect(head.value).toEqual(0);
					expect(head.next).toBeDefined();
					expect(head.next.next.next.next.next.next).not.toBe(head);
					expect(head.next.next.next.next.next.value).toBe(5);

					expect(findLoop(head)).toBe(false);
					expect(findLoop(head)).toBeFalsy();					
				});	
				it('finds no loop in empty list', function(){
					expect(findLoop()).toBe(false);
					expect(findLoop({})).toBe(false);
					expect(findLoop(null)).toBe(false);
				});
				it('finds no loop in list with only one node', function(){
					var	head = {
							value : 0,
							next : null
						};
					expect(findLoop(head)).toBe(false);
					expect(findLoop(head)).toBeFalsy();
				});	
				it('finds loop in list with only one node that points to itself', function(){
					var	head = {
							value : 0,
							next : null
						};
					head.next = head;
					expect(findLoop(head)).toBe(true);
				});	
				it('finds loop in list with two nodes pointing to each other', function(){
					var	head = {
							value : 0,
							next : null
						};
					head.next = {
						value : 1,
						next : head
					};
					expect(findLoop(head)).toBe(true);
				});					
			});

			describe('Find missing number in array', function(){
				it('finds the one missing number in a middle sized list', function(){
					expect(findMissingNumber([2, 4, 1, 7, 3, 8, 6])).toBe(5);
					expect(findMissingNumber([2, 4, 1, 7, 5, 8, 6])).toBe(3);
					expect(findMissingNumber([2, 4, 1, 7, 5, 3, 6])).toBe(8);
					expect(findMissingNumber([2, 4, 8, 7, 5, 3, 6])).toBe(1);
					expect(findMissingNumber([2, 4, 8, 7, 5, 3, 1])).toBe(6);
				});
				it('finds the missing number in a two elements list', function(){
					expect(findMissingNumber([3, 1])).toBe(2);
					expect(findMissingNumber([2, 1])).toBe(3);
					expect(findMissingNumber([2, 3])).toBe(1);
				});
			})
			

		</script>
	</head>
	<body>
	</body>
</html>


